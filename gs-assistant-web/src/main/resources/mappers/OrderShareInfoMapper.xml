<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.fbee.modules.mybatis.dao.OrderShareInfoMapper">
  <resultMap id="BaseResultMap" type="com.fbee.modules.mybatis.model.OrderShareInfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 02 13:03:22 CST 2017.
    -->
    <id column="ORDER_NO" jdbcType="VARCHAR" property="orderNo" />
    <result column="TENANT_ID" jdbcType="INTEGER" property="tenantId" />
    <result column="SHARE_ID" jdbcType="INTEGER" property="shareId" />
    <result column="ORDER_NAME" jdbcType="VARCHAR" property="orderName" />
    <result column="AGE_REQUIREMENT" jdbcType="VARCHAR" property="ageRequirement" />
    <result column="SALARY_SITUATION" jdbcType="VARCHAR" property="salarySituation" />
    <result column="REMARK" jdbcType="VARCHAR" property="remark" />
    <result column="STATUS" jdbcType="VARCHAR" property="status" />
    <result column="SINGLE_REWARD" jdbcType="VARCHAR" property="singleReward" />
    <result column="add_time" jdbcType="TIMESTAMP" property="addTime" />
    <result column="add_account" jdbcType="VARCHAR" property="addAccount" />
    <result column="modify_time" jdbcType="TIMESTAMP" property="modifyTime" />
    <result column="modify_account" jdbcType="VARCHAR" property="modifyAccount" />
    <result column="is_usable" jdbcType="VARCHAR" property="isUsable" />
  </resultMap>
  <sql id="Example_Where_Clause">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 02 13:03:22 CST 2017.
    -->
    <where>
      <foreach collection="oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 02 13:03:22 CST 2017.
    -->
    <where>
      <foreach collection="example.oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 02 13:03:22 CST 2017.
    -->
    ORDER_NO, TENANT_ID, SHARE_ID, ORDER_NAME, AGE_REQUIREMENT, SALARY_SITUATION, REMARK, 
    STATUS, SINGLE_REWARD, add_time, add_account, modify_time, modify_account, is_usable
  </sql>
  <select id="selectByExample" parameterType="com.fbee.modules.mybatis.model.OrderShareInfoExample" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 02 13:03:22 CST 2017.
    -->
    select
    <if test="distinct">
      distinct
    </if>
    <include refid="Base_Column_List" />
    from order_share_info
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 02 13:03:22 CST 2017.
    -->
    select 
    <include refid="Base_Column_List" />
    from order_share_info
    where ORDER_NO = #{orderNo,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 02 13:03:22 CST 2017.
    -->
    delete from order_share_info
    where ORDER_NO = #{orderNo,jdbcType=VARCHAR}
  </delete>
  <delete id="deleteByExample" parameterType="com.fbee.modules.mybatis.model.OrderShareInfoExample">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 02 13:03:22 CST 2017.
    -->
    delete from order_share_info
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="com.fbee.modules.mybatis.model.OrderShareInfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 02 13:03:22 CST 2017.
    -->
    insert into order_share_info (ORDER_NO, TENANT_ID, SHARE_ID, 
      ORDER_NAME, AGE_REQUIREMENT, SALARY_SITUATION, 
      REMARK, STATUS, SINGLE_REWARD, 
      add_time, add_account, modify_time, 
      modify_account, is_usable)
    values (#{orderNo,jdbcType=VARCHAR}, #{tenantId,jdbcType=INTEGER}, #{shareId,jdbcType=INTEGER}, 
      #{orderName,jdbcType=VARCHAR}, #{ageRequirement,jdbcType=VARCHAR}, #{salarySituation,jdbcType=VARCHAR}, 
      #{remark,jdbcType=VARCHAR}, #{status,jdbcType=VARCHAR}, #{singleReward,jdbcType=VARCHAR}, 
      #{addTime,jdbcType=TIMESTAMP}, #{addAccount,jdbcType=VARCHAR}, #{modifyTime,jdbcType=TIMESTAMP}, 
      #{modifyAccount,jdbcType=VARCHAR}, #{isUsable,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.fbee.modules.mybatis.model.OrderShareInfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 02 13:03:22 CST 2017.
    -->
    insert into order_share_info
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="orderNo != null">
        ORDER_NO,
      </if>
      <if test="tenantId != null">
        TENANT_ID,
      </if>
      <if test="shareId != null">
        SHARE_ID,
      </if>
      <if test="orderName != null">
        ORDER_NAME,
      </if>
      <if test="ageRequirement != null">
        AGE_REQUIREMENT,
      </if>
      <if test="salarySituation != null">
        SALARY_SITUATION,
      </if>
      <if test="remark != null">
        REMARK,
      </if>
      <if test="status != null">
        STATUS,
      </if>
      <if test="singleReward != null">
        SINGLE_REWARD,
      </if>
      <if test="addTime != null">
        add_time,
      </if>
      <if test="addAccount != null">
        add_account,
      </if>
      <if test="modifyTime != null">
        modify_time,
      </if>
      <if test="modifyAccount != null">
        modify_account,
      </if>
      <if test="isUsable != null">
        is_usable,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="orderNo != null">
        #{orderNo,jdbcType=VARCHAR},
      </if>
      <if test="tenantId != null">
        #{tenantId,jdbcType=INTEGER},
      </if>
      <if test="shareId != null">
        #{shareId,jdbcType=INTEGER},
      </if>
      <if test="orderName != null">
        #{orderName,jdbcType=VARCHAR},
      </if>
      <if test="ageRequirement != null">
        #{ageRequirement,jdbcType=VARCHAR},
      </if>
      <if test="salarySituation != null">
        #{salarySituation,jdbcType=VARCHAR},
      </if>
      <if test="remark != null">
        #{remark,jdbcType=VARCHAR},
      </if>
      <if test="status != null">
        #{status,jdbcType=VARCHAR},
      </if>
      <if test="singleReward != null">
        #{singleReward,jdbcType=VARCHAR},
      </if>
      <if test="addTime != null">
        #{addTime,jdbcType=TIMESTAMP},
      </if>
      <if test="addAccount != null">
        #{addAccount,jdbcType=VARCHAR},
      </if>
      <if test="modifyTime != null">
        #{modifyTime,jdbcType=TIMESTAMP},
      </if>
      <if test="modifyAccount != null">
        #{modifyAccount,jdbcType=VARCHAR},
      </if>
      <if test="isUsable != null">
        #{isUsable,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="com.fbee.modules.mybatis.model.OrderShareInfoExample" resultType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 02 13:03:22 CST 2017.
    -->
    select count(*) from order_share_info
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 02 13:03:22 CST 2017.
    -->
    update order_share_info
    <set>
      <if test="record.orderNo != null">
        ORDER_NO = #{record.orderNo,jdbcType=VARCHAR},
      </if>
      <if test="record.tenantId != null">
        TENANT_ID = #{record.tenantId,jdbcType=INTEGER},
      </if>
      <if test="record.shareId != null">
        SHARE_ID = #{record.shareId,jdbcType=INTEGER},
      </if>
      <if test="record.orderName != null">
        ORDER_NAME = #{record.orderName,jdbcType=VARCHAR},
      </if>
      <if test="record.ageRequirement != null">
        AGE_REQUIREMENT = #{record.ageRequirement,jdbcType=VARCHAR},
      </if>
      <if test="record.salarySituation != null">
        SALARY_SITUATION = #{record.salarySituation,jdbcType=VARCHAR},
      </if>
      <if test="record.remark != null">
        REMARK = #{record.remark,jdbcType=VARCHAR},
      </if>
      <if test="record.status != null">
        STATUS = #{record.status,jdbcType=VARCHAR},
      </if>
      <if test="record.singleReward != null">
        SINGLE_REWARD = #{record.singleReward,jdbcType=VARCHAR},
      </if>
      <if test="record.addTime != null">
        add_time = #{record.addTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.addAccount != null">
        add_account = #{record.addAccount,jdbcType=VARCHAR},
      </if>
      <if test="record.modifyTime != null">
        modify_time = #{record.modifyTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.modifyAccount != null">
        modify_account = #{record.modifyAccount,jdbcType=VARCHAR},
      </if>
      <if test="record.isUsable != null">
        is_usable = #{record.isUsable,jdbcType=VARCHAR},
      </if>
    </set>
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 02 13:03:22 CST 2017.
    -->
    update order_share_info
    set ORDER_NO = #{record.orderNo,jdbcType=VARCHAR},
      TENANT_ID = #{record.tenantId,jdbcType=INTEGER},
      SHARE_ID = #{record.shareId,jdbcType=INTEGER},
      ORDER_NAME = #{record.orderName,jdbcType=VARCHAR},
      AGE_REQUIREMENT = #{record.ageRequirement,jdbcType=VARCHAR},
      SALARY_SITUATION = #{record.salarySituation,jdbcType=VARCHAR},
      REMARK = #{record.remark,jdbcType=VARCHAR},
      STATUS = #{record.status,jdbcType=VARCHAR},
      SINGLE_REWARD = #{record.singleReward,jdbcType=VARCHAR},
      add_time = #{record.addTime,jdbcType=TIMESTAMP},
      add_account = #{record.addAccount,jdbcType=VARCHAR},
      modify_time = #{record.modifyTime,jdbcType=TIMESTAMP},
      modify_account = #{record.modifyAccount,jdbcType=VARCHAR},
      is_usable = #{record.isUsable,jdbcType=VARCHAR}
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.fbee.modules.mybatis.model.OrderShareInfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 02 13:03:22 CST 2017.
    -->
    update order_share_info
    <set>
      <if test="tenantId != null">
        TENANT_ID = #{tenantId,jdbcType=INTEGER},
      </if>
      <if test="shareId != null">
        SHARE_ID = #{shareId,jdbcType=INTEGER},
      </if>
      <if test="orderName != null">
        ORDER_NAME = #{orderName,jdbcType=VARCHAR},
      </if>
      <if test="ageRequirement != null">
        AGE_REQUIREMENT = #{ageRequirement,jdbcType=VARCHAR},
      </if>
      <if test="salarySituation != null">
        SALARY_SITUATION = #{salarySituation,jdbcType=VARCHAR},
      </if>
      <if test="remark != null">
        REMARK = #{remark,jdbcType=VARCHAR},
      </if>
      <if test="status != null">
        STATUS = #{status,jdbcType=VARCHAR},
      </if>
      <if test="singleReward != null">
        SINGLE_REWARD = #{singleReward,jdbcType=VARCHAR},
      </if>
      <if test="addTime != null">
        add_time = #{addTime,jdbcType=TIMESTAMP},
      </if>
      <if test="addAccount != null">
        add_account = #{addAccount,jdbcType=VARCHAR},
      </if>
      <if test="modifyTime != null">
        modify_time = #{modifyTime,jdbcType=TIMESTAMP},
      </if>
      <if test="modifyAccount != null">
        modify_account = #{modifyAccount,jdbcType=VARCHAR},
      </if>
      <if test="isUsable != null">
        is_usable = #{isUsable,jdbcType=VARCHAR},
      </if>
    </set>
    where ORDER_NO = #{orderNo,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.fbee.modules.mybatis.model.OrderShareInfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 02 13:03:22 CST 2017.
    -->
    update order_share_info
    set TENANT_ID = #{tenantId,jdbcType=INTEGER},
      SHARE_ID = #{shareId,jdbcType=INTEGER},
      ORDER_NAME = #{orderName,jdbcType=VARCHAR},
      AGE_REQUIREMENT = #{ageRequirement,jdbcType=VARCHAR},
      SALARY_SITUATION = #{salarySituation,jdbcType=VARCHAR},
      REMARK = #{remark,jdbcType=VARCHAR},
      STATUS = #{status,jdbcType=VARCHAR},
      SINGLE_REWARD = #{singleReward,jdbcType=VARCHAR},
      add_time = #{addTime,jdbcType=TIMESTAMP},
      add_account = #{addAccount,jdbcType=VARCHAR},
      modify_time = #{modifyTime,jdbcType=TIMESTAMP},
      modify_account = #{modifyAccount,jdbcType=VARCHAR},
      is_usable = #{isUsable,jdbcType=VARCHAR}
    where ORDER_NO = #{orderNo,jdbcType=VARCHAR}
  </update>

  <!-- 根据订单流水号获取分享信息 @xiehui -->
  <select id="selectShareInfoByOrderNo" parameterType="map"
          resultType="java.util.Map">
    SELECT
	    b.add_time 'shareDate',
	    b.SINGLE_REWARD 'singleReward',
	    d.WEBSITE_NAME 'tenantName',
	    a.user_name 'userName',
	    d.TENANTS_PHONE 'mobile',
	    b.STATUS 'status',
	    a.share_name 'addAccount'
    FROM
     	orders a ,
    	order_share_info b,
    	tenants_apps d
		 
    WHERE
		a.ORDER_NO = b.ORDER_NO
	and a.share_tenant_id = d.TENANT_ID
    and a.ORDER_NO =#{orderNo}
  </select>

  <select id="selectTaoShareInfoByOrderNo" parameterType="map"
          resultType="java.util.Map">
 SELECT
  a.add_time        'shareDate',
  a.SINGLE_REWARD
                    'singleReward',
  b.WEBSITE_NAME    'tenantName',
  d.login_name      'loginName',
  b.CONTACT_NAME    'staffName',
  b.TENANTS_PHONE   'mobile',
  a.STATUS          'status',
  a.ORDER_NAME      'orderName',
  a.AGE_REQUIREMENT 'ageRequirement',
  a.SALARY_SITUATION 'salarySituation',
  a.REMARK          'remark',
  c.user_name       'addAccount',
  c.user_id         'userId',
  c.user_type       'userType'
FROM
  order_share_info a,
  tenants_apps b,
  orders c,
  tenants_users d
WHERE
  a.ORDER_NO = c.SHARE_ORDER_NO
  AND
  a.TENANT_ID = b.TENANT_ID
  AND
  d.tenant_id = a.TENANT_ID
  AND d.id = c.user_id
  AND c.ORDER_NO = #{orderNo}
 </select>
  
  <select id="getNumOrderInShare" parameterType="java.lang.Integer" resultType="java.lang.Integer">
    SELECT COUNT(0) FROM order_share_info WHERE TENANT_ID = #{tenantId} AND STATUS in('01','04')
  </select>
  
  <!-- ��ѯ����������� -->
  <select id="getOrderShareInfoCount" resultType="java.lang.Integer">
  		select count(1) from order_share_info
  </select>
  <!-- ��ѯ������б� -->
  <select id="getOrderShareInfoList" parameterType="java.util.Map" resultType="java.util.Map">
		SELECT
			a.TENANT_ID 'sourceTenantId', <!-- ������Դ�⻧id -->
			a.ORDER_NO "orderNo",
			a.ORDER_NAME "orderName",
			a.AGE_REQUIREMENT "age",
			a.SALARY_SITUATION "salary",
			a.REMARK "remark",
			FUNC_GET_CODE_NAME('STATUS',a.STATUS,'1') "status",
			CASE WHEN a.SINGLE_REWARD IS NOT NULL  
			then a.SINGLE_REWARD
			else '/' end  "singleReward",
			CASE WHEN a.SINGLE_REWARD IS NOT NULL 
			THEN 'show'
			ELSE 'hide' END "rewardFlag"
		FROM
			order_share_info a 
		ORDER BY a.STATUS asc , a.add_time desc 
		limit #{offset},#{pageSize} 
  </select>
  
  <!--  -->
    <select id="getOrderInfo" parameterType="java.lang.String"
            resultType="java.util.Map">
  SELECT
	  a.ORDER_NO 'orderNo',
	  a.TENANT_ID "sourceTenantId",
	  DATE_FORMAT(a.add_time,'%Y-%m-%d %H:%i:%s') "shareTime",
	  FUNC_GET_CODE_NAME('STATUS',a.STATUS,'1') "stauts",
	  b.WEBSITE_NAME
	  "websiteName",
	  c.user_name "userName",
	  b.TENANTS_PHONE "contactPhone",
	  CASE WHEN a.SINGLE_REWARD IS NOT NULL
	  then a.SINGLE_REWARD
	  else '/' end
	  "singleReward"
  FROM
  		order_share_info a , tenants_apps b,orders c
  where 	a.TENANT_ID = b.TENANT_ID
  	and 	c.tenant_id = a.tenant_id
  	and 	a.ORDER_NO = c.ORDER_NO
  	and 	a.ORDER_NO = #{orderNo}
  GROUP BY shareTime
 </select>
  <!-- ������Ϣ -->
  <select id="getServiceInfo" parameterType="java.lang.String" resultType="java.util.Map">
		 select 
			FUNC_GET_CODE_NAME('SERVICE_TYPES',a.SERVICE_ITEM_CODE,'1') 'serviceItemCodeName',
			a.SERVICE_ITEM_CODE 'serviceItemCode'
			a.SERVICE_TYPE 'serviceType',
			CONCAT_WS('/',a.SERVICE_PROVICE,a.SERVICE_CITY,a.SERVICE_COUNTY) 'serviceArea',
			DATE_FORMAT(a.SERVICE_START,'%Y-%m-%d')  'serviceStartTime',
			DATE_FORMAT(a.SERVICE_END,'%Y-%m-%d')    'serviceEndTime',
			a.WAGE_REQUIREMENTS  'wageRequirements',
			a.SALARY_REQUIREMENTS   'salaryRequirements',
			a.REMARKS 'remarks',
			a.PET_RAISING 'petRaising',
			a.SALARY_SKILLS 'salarySkills',
			a.LANGUAGE_REQUIREMENTS 'languageRequirements',
			a.COOKING_REQIREMENTS 'cookingReqirements',
			a.PERSONALITY_REQUIREMENTS 'personalityRequirements',
			a.SPECIAL_NEEDS 'specialNeeds'
		 from order_customers_info a 
		 where a.ORDER_NO = #{orderNo}
  </select>
  <!-- �ͻ���Ϣ -->
  <select id="getCustBaseInfo" parameterType="java.lang.Integer" resultType="java.util.Map">
		SELECT
			a.HOUSE_TYPE "houseType",
			a.HOUSE_AREA "houseArea",
			a.FAMILY_COUNT "familyCount",
			a.CHILDREN_COUNT "childrenCount",
			a.OLDER_COUNT "olderCount",
			a.CHILDREN_AGE_RANGE "childrenAgeRange",
			a.OLDER_AGE_RANGE "olderAgeRange",
			a.SELF_CARES "selfCares"
		FROM
			tenants_customers_base a
			where a.CUSTOMER_ID = #{memberId}
  </select>
  <select id="getOrderShareStaffInfo" parameterType="java.util.Map" resultType="java.util.Map">
		SELECT
			IFNULL(REMARK, '') "remark",
			b.STAFF_NAME "staffName",
			b.AGE "age",
			FUNC_GET_CODE_NAME ('ZODIAC', b.ZODIAC, '1') "zodiac",
			FUNC_GET_CODE_NAME ('NATIVE_PLACE',b.NATIVE_PLACE,'1') "nativePlace",
			FUNC_GET_CODE_NAME ('EDUCATION',b.EDUCARION,'1') "education",
			IFNULL(b.SPECIALTY, '') "specialty",
			a.status "status",
			FUNC_GET_CODE_NAME('STAFF_STATUS',a.status,'1') "statusName",
			NOW() "systemTime" , 
			a.add_time "addTime"
		FROM
			order_share_staff_info a,
			tenants_staffs_info b
		WHERE
			a.STAFF_ID = b.STAFF_ID 
			and a.TENANT_ID = b.TENANT_ID
			and a.ORDER_NO = #{orderNo}
			and a.TENANT_ID = #{tenantId}
			ORDER BY a.add_time desc
		LIMIT 0,1  
  </select>
  
  <select id="getStaffInfoCount" parameterType="java.util.Map" resultType="java.lang.String">
  	
  </select>
  <select id="getStaffInfoList" parameterType="java.util.Map" resultType="java.util.Map">
  
  
  </select>
  <select id="getDeliveryBoxInfoCount" resultType="java.lang.Integer" parameterType="java.util.Map">
		SELECT
			count(1)
		FROM
			DELIVERY_BOX_INFO a , tenants_staffs_info b , order_share_info c
			where a.STAFF_ID = b.STAFF_ID and a.ORDER_NO = c.ORDER_NO  and a.SOURCE_TENANT_ID = #{tenantId}
  </select>
  <select id="getDeliveryBoxInfoList" parameterType="java.util.Map" resultType="java.util.Map">
		SELECT
			a.ID 'id',
			a.STAFF_ID 'staffId',
			a.MATCHING_DEGREE  'matchingDegree',
			b.HEAD_IMAGE 'headImage',
			b.STAFF_NAME 'staffName',
			b.AGE 'age',
			b.ZODIAC 'zodiac',
			b.NATIVE_PLACE "nativePlace",
			b.EDUCARION "educarion",
			b.SPECIALTY "specialty",
			c.ORDER_NAME 'orderName',
			FUNC_GET_CODE_NAME('HANDLE_RESULT',a.HANDLE_RESULT,'1') 'handleResult',
			DATE_FORMAT(a.DELIVERY_DATE,'%Y/%m/%d %H:%i:%s') 'deliveryDate'
		FROM
			DELIVERY_BOX_INFO a , tenants_staffs_info b , order_share_info c
			where a.STAFF_ID = b.STAFF_ID and a.ORDER_NO = c.ORDER_NO 
			and a.SOURCE_TENANT_ID = #{tenantId}
			order by a.DELIVERY_DATE desc
			limit #{offset},#{pageSize} 
  </select>
</mapper>